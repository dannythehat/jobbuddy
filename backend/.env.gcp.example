# Backend Environment Variables for GCP Deployment
# These variables are injected via GCP Secret Manager at runtime

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=production
PORT=8080  # Required for Cloud Run
HOST=0.0.0.0

# ============================================
# DATABASE CONFIGURATION (Cloud SQL)
# ============================================
# For Cloud Run with Cloud SQL Proxy:
DATABASE_URL=postgresql://jobbuddy_user:PASSWORD@/jobbuddy_prod?host=/cloudsql/PROJECT_ID:REGION:INSTANCE_NAME
DB_HOST=/cloudsql/PROJECT_ID:REGION:INSTANCE_NAME
DB_PORT=5432
DB_NAME=jobbuddy_prod
DB_USER=jobbuddy_user
# DB_PASSWORD - Injected from Secret Manager: jobbuddy-db-password
DB_SSL=false  # Not needed with Cloud SQL Proxy

# ============================================
# SECRETS (Injected from GCP Secret Manager)
# ============================================
# JWT_SECRET - Secret: jobbuddy-jwt-secret
# OPENAI_API_KEY - Secret: jobbuddy-openai-key
# ENCRYPTION_KEY - Secret: jobbuddy-encryption-key
# GOOGLE_CLIENT_ID - Secret: jobbuddy-google-client-id
# GOOGLE_CLIENT_SECRET - Secret: jobbuddy-google-client-secret
# REDIS_PASSWORD - Secret: jobbuddy-redis-password
# SMTP_PASS - Secret: jobbuddy-smtp-password

# ============================================
# JWT CONFIGURATION
# ============================================
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your_refresh_secret_here

# ============================================
# OPENAI CONFIGURATION
# ============================================
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=2000

# ============================================
# GOOGLE OAUTH
# ============================================
GOOGLE_REDIRECT_URI=https://your-domain.com/auth/google/callback

# ============================================
# EMAIL CONFIGURATION
# ============================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
FROM_EMAIL=noreply@jobbuddy.com
FROM_NAME=JobBuddy

# ============================================
# CORS CONFIGURATION
# ============================================
FRONTEND_URL=https://jobbuddy-frontend-REGION.a.run.app
ALLOWED_ORIGINS=https://jobbuddy-frontend-REGION.a.run.app,https://your-custom-domain.com

# ============================================
# REDIS CONFIGURATION (Optional)
# ============================================
REDIS_URL=redis://10.0.0.1:6379
# REDIS_PASSWORD - Injected from Secret Manager

# ============================================
# MONITORING & LOGGING
# ============================================
LOG_LEVEL=info
ENABLE_REQUEST_LOGGING=true
HEALTH_CHECK_INTERVAL=30000

# ============================================
# SECURITY
# ============================================
BCRYPT_ROUNDS=12
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_ANALYTICS=true
ENABLE_CACHING=true
ENABLE_RATE_LIMITING=true

# ============================================
# GCP-SPECIFIC
# ============================================
GCP_PROJECT_ID=your-project-id
GCP_REGION=us-central1
CLOUD_SQL_INSTANCE=PROJECT_ID:REGION:INSTANCE_NAME
